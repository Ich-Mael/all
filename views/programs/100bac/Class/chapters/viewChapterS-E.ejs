<% layout('layouts/100bacBoilerplate') %>
<style>
  html {
    font-family: "Times New Roman", Times, serif;
  }

  .chapter-heading {
    background: linear-gradient(to top,
        rgba(189, 210, 230, 0.164),
        rgba(253, 255, 255, 0.288),
        rgba(176, 164, 223, 0.171)),
      url("https://images.pexels.com/photos/5905441/pexels-photo-5905441.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500") center no-repeat;
    background-size: cover;
    height: 40vh;
  }

  .exo-link {
    font-size: 1.5rem;
    letter-spacing: 0.123rem;
    padding: 0.5rem 1rem;
  }

  .ex-link {
    font-size: 1.3rem;
    text-decoration: none;
    letter-spacing: 0.123rem;
    color: blueviolet;
    padding: 0.5rem 1rem;
  }

  .subject {
    font-family: "Times New Roman", Times, serif;
    color: rgba(96, 11, 175, 0.836);
    font-weight: 700;
    display: inline-block;
    border-bottom: 4px solid rgb(17, 20, 20);
  }

  .heading {
    color: rgb(72, 26, 116);
    text-transform: uppercase;
    font-size: 1.5rem;
    letter-spacing: 0.13rem;
  }

  .chapter {
    font-family: "Times New Roman", Times, serif;
    display: inline-block;
    font-size: 1.8rem;
    padding: 0.7rem 1rem;
    background-color: rgb(255, 254, 253);
    box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px,
      rgba(0, 0, 0, 0.3) 0px 30px 60px -30px,
      rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;
  }

  .course-card {
    box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  }

  .content-title {
    font-size: 1.4rem;
    color: rgb(7, 114, 114);
    font-weight: 500;
    font-family: 'Times New Roman', Times, serif;
    text-align: center;
    padding: 2rem auto;
  }

  @media (max-width: 750px) {
    html {
      font-size: 80%;
    }
  }

  @media (max-width: 350px) {
    html {
      font-size: 60%;
    }
  }
</style>

<div class="
    chapter-heading
    d-flex
    flex-column
    align-items-center
    justify-content-evenly
  ">
  <h2 class="text-center subject py-3">
    <%= subject.title %> <%= serie.title %>
  </h2>
  <h3 class="chapter">
    Chapitre <%= subject.chapitres.indexOf(chapter._id)+ 1 %>: <%= chapter.title
    %>
  </h3>
</div>
<h2 class="my-3 pb-3 text-center heading" style="border-bottom: 2px solid rgb(82, 4, 105);"> Exercices d'apprentissage
</h2>

<div class="d-flex justify-content-around py-5">
  <button class="btn exo-link video-btn btn-success mx-2 my-2" type="button" data-bs-toggle="collapse"
    data-bs-target="#self-p-1" aria-expanded="false" aria-controls="collapseExample">
    Exercices corrigés
  </button>

  <button class="btn  exo-link video-btn btn-outline-primary mx-2 my-2" type="button" data-bs-toggle="collapse"
    data-bs-target="#self-p-2" aria-expanded="false" aria-controls="collapseExample">
    Exercices non corrigés
  </button>
</div>

<div class="collapse" id="self-p-1">
  <div class="card card-body">
    <div class="container">
      <div class="row mt-4 mb-5">
        <% for(const [i, content] of chapter.starterExercise.entries()){%>
        <div class="col-md-4">
          <div class="course-card m-3 py-3">
            <h3 class="content-title px-2"><span style="font-weight: bolder;">Exercice <%= i + 1%></span>:
              <%= content.title %></h3>
            <!-- Button trigger modal -->
            <a type="button" class="btn d-block mt-3 mx-5 text-center btn-outline-primary" data-bs-toggle="modal"
              data-bs-target="#N<%= content._id %>">
              Essayer l'exercice
            </a>
            <!-- Modal -->
            <div class="modal fade" id="N<%= content._id %>" tabindex="-1" aria-labelledby="exampleModalLabel"
              aria-hidden="true">
              <div class="modal-dialog modal-xl">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"><%= content.title %></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div id="tv-container">
                      <div id="monitor">
                        <div class="afrohk-TV">
                          <h3 class="text-center afrohk-text mb-2 py-0">
                            <span class="afrohk">AfroHK</span><span class="tv">Radar</span>
                          </h3>
                        </div>
                        <div id="monitorscreen">
                          <iframe id="vimeo-content" src="<%= content.correctionVideoLink %>" frameborder="0"
                            height="500px" width="1000px" allow="autoplay; fullscreen; picture-in-picture"
                            allow="fullscreen" title="High-intensity Classes"></iframe>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Quitter</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <% } %>
      </div>
    </div>
  </div>
</div>

<div class="collapse" id="self-p-2">
  <div class="card card-body">
    <div class="container">
      <% for(const [i, content] of chapter.practiceExercises.entries()){%>
      <a class="ex-link px-2 py-3" target="_blank" href="<%= content.pdf_link %>"><span
          style="font-weight: bolder;"></span>Exercice <%= i + 1%></span>: <%= content.title %></a><br>
      <% } %>
    </div>
  </div>
</div>